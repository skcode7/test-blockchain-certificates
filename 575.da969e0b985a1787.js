"use strict";(self.webpackChunkgenexus_web_application=self.webpackChunkgenexus_web_application||[]).push([[575],{1575:(x,d,g)=>{g.r(d),g.d(d,{gx_gauge:()=>b});var a=g(4570),m=g(9788);let b=class{constructor(e){(0,a.r)(this,e),this.gxGaugeDidLoad=(0,a.c)(this,"gxGaugeDidLoad",7),this.type="line",this.showValue=!1,this.showMinMax=!1,this.minValue=0,this.thickness=10,this.rangesChildren=[],this.labelsOverflow=!1,this.lineCurrentValuePosition="Center",this.lineIndicatorPosition="Center",this.shouldSetGaugeObserver=!1,this.maxValueAux=this.minValue,this.totalAmount=0,this.didLoad=!1}typeHandler(e){this.disconnectObserver(),this.shouldSetGaugeObserver="line"===e||this.showValue&&"circle"===e}showValueHandler(e){this.disconnectObserver(),this.shouldSetGaugeObserver=e&&("line"===this.type||"circle"===this.type)}labelsPositionHandler(e,t){"line"===this.type&&(!this.labelsOverflow&&e<t||this.labelsOverflow&&e>t)&&this.decideLabelsPosition()}onGaugeRangeDidLoad({detail:e}){this.rangesChildren=[...this.rangesChildren,e],this.totalAmount+=e.amount,e.element.addEventListener("gxGaugeRangeDidUnload",()=>{this.rangesChildren=this.rangesChildren.filter(t=>t!=e),this.totalAmount-=e.amount}),e.element.addEventListener("gxGaugeRangeDidUpdate",()=>{const t=this.rangesChildren.findIndex(n=>n===e);this.rangesChildren.splice(t,1,e),this.totalAmount=0;for(const n of this.rangesChildren)this.totalAmount+=n.amount})}connectedCallback(){this.showValue&&"circle"===this.type&&this.setCircleGaugeObserver()}componentDidLoad(){"line"===this.type&&this.setLineGaugeObserver(),this.didLoad=!0}componentDidRender(){this.showValue&&"line"===this.type&&this.setValueAndIndicatorPosition(),this.shouldSetGaugeObserver&&("line"==this.type?this.setLineGaugeObserver():this.setCircleGaugeObserver(),this.shouldSetGaugeObserver=!1)}disconnectedCallback(){this.disconnectObserver()}setCircleGaugeObserver(){this.watchForItemsObserver=new ResizeObserver(()=>{const e=Math.min(this.SVGcircle.getBoundingClientRect().height,this.SVGcircle.getBoundingClientRect().width)/2.5;this.circleCurrentValue.style.fontSize=`${e}px`}),this.watchForItemsObserver.observe(this.element)}setLineGaugeObserver(){this.watchForItemsObserver=new ResizeObserver(()=>{this.showValue&&this.setValueAndIndicatorPosition(),this.decideLabelsPosition()}),this.watchForItemsObserver.observe(this.labelsSubContainer)}disconnectObserver(){void 0!==this.watchForItemsObserver&&(this.watchForItemsObserver.disconnect(),this.watchForItemsObserver=void 0)}updateMaxValueAux(){this.maxValueAux=void 0===this.maxValue?this.minValue+this.totalAmount:this.maxValue}calcThickness(){return"number"==typeof this.thickness&&this.thickness>0&&this.thickness<=99?this.thickness:10}calcPercentage(){return this.value<=this.minValue?0:100*(this.value-this.minValue)/(this.maxValueAux-this.minValue)}setValueAndIndicatorPosition(){const e=this.calcPercentage()>=100?100:this.calcPercentage(),t=this.linearCurrentValueContainer.getBoundingClientRect().width,n=t/100*e,o=this.linearCurrentValue.getBoundingClientRect().width/2;this.lineCurrentValuePosition=n-o<0?"Left":n+o>t?"Right":"Center";const r=this.linearIndicator.getBoundingClientRect().width/2;this.lineIndicatorPosition=n-r<0?"Left":n+r>t?"Right":"Center"}decideLabelsPosition(){!this.didLoad||this.labelsOverflow&&null==this.labelsSubContainer||(this.labelsOverflow=this.labelsSubContainer.getBoundingClientRect().height>2*this.calcThickness())}addCircleRanges({amount:e,color:t},n,o,r){const i=2*Math.PI*o,h=e/(this.maxValueAux-this.minValue);return(0,a.h)("circle",{class:"circle-range",r:o,cx:"50%",cy:"50%",stroke:t,"stroke-dasharray":`${i*h}, ${i}`,transform:`rotate(${n+-90} 50,50)`,"data-amount":e,"stroke-width":`${this.calcThickness()}%`,style:{"--child-number":r,"--stroke-dasharray-initial":`0, ${i}`,"--stroke-dasharray":`${i*h}, ${i}`}})}addLineRanges({amount:e,color:t},n,o){return(0,a.h)("div",{class:"range",style:{"background-color":t,"margin-left":`${n}%`,"--child-number":o,"--range-width":100*e/(this.maxValueAux-this.minValue)+"%"}})}addLineRangesLabels({amount:e,color:t,name:n},o,r){return(0,a.h)("span",{class:"range-label",style:{"margin-left":`${o}%`,color:t,"--child-number":r,"--range-width":100*e/(this.maxValueAux-this.minValue)+"%"}},n)}renderCircle(e){const n=[],r=50-this.calcThickness()/2;this.totalAmount=0;for(let s=e.length-1;s>=0;s--)this.totalAmount+=e[s].amount;this.updateMaxValueAux();const c=this.maxValueAux-this.minValue;let i=0;for(let s=0;s<e.length;s++)n.push(this.addCircleRanges(e[s],i,r,s.toString())),i+=360*e[s].amount/c;const u=100==this.calcPercentage()?"rotate(449.5deg)":`rotate(${3.6*this.calcPercentage()+90}deg)`,h=(0,m.g)(this.cssClass);return(0,a.h)(a.H,{class:{[this.cssClass]:!!this.cssClass,[h.vars]:!0},"data-readonly":!0},(0,a.h)("div",{class:"circle-gauge-container"},(0,a.h)("div",{class:"svg-and-indicator-container"},(0,a.h)("svg",{viewBox:"0 0 100 100"},(0,a.h)("circle",{class:"background-circle",r,cx:"50%",cy:"50%","stroke-width":`${this.calcThickness()}%`,ref:s=>this.SVGcircle=s}),n),this.showValue&&(0,a.h)("div",{class:"indicator-container",style:{transform:u}},(0,a.h)("div",{class:"indicator",style:{width:`${this.calcThickness()+2}%`}}))),this.showValue&&(0,a.h)("div",{class:"current-value-container"},(0,a.h)("span",{class:"current-value",ref:s=>this.circleCurrentValue=s},this.value))))}renderLine(e){const t=[],n=[];this.totalAmount=0;for(let i=e.length-1;i>=0;i--)this.totalAmount+=e[i].amount;this.updateMaxValueAux();const o=this.maxValueAux-this.minValue;let r=0;for(let i=0;i<e.length;i++)t.push(this.addLineRanges(e[i],r,i.toString())),n.push(this.addLineRangesLabels(e[i],r,i.toString())),r+=100*e[i].amount/o;const l=this.calcPercentage()>=100?100:this.calcPercentage(),c=(0,m.g)(this.cssClass);return(0,a.h)(a.H,{class:{[this.cssClass]:!!this.cssClass,[c.vars]:!0},"data-readonly":!0},(0,a.h)("div",{class:"line-gauge-container",style:{"--percentage":`${l}%`}},this.showValue&&(0,a.h)("div",{class:"current-value-container",ref:i=>this.linearCurrentValueContainer=i},(0,a.h)("span",{class:{"current-value":!0,"center-align":"Center"===this.lineCurrentValuePosition,"right-align":"Right"===this.lineCurrentValuePosition},ref:i=>this.linearCurrentValue=i},this.value)),(0,a.h)("div",{class:"ranges-labels-and-indicator-container",style:{height:2*this.calcThickness()+(this.showValue?4:0)+"px"}},this.showValue&&(0,a.h)("div",{class:{indicator:!0,"center-align":"Center"===this.lineIndicatorPosition,"right-align":"Right"===this.lineIndicatorPosition},ref:i=>this.linearIndicator=i}),(0,a.h)("div",{class:"ranges-and-labels-container",style:{"border-radius":`${this.calcThickness()}px`}},t,(0,a.h)("div",{class:"labels-container"},(0,a.h)("div",{class:"labels-subcontainer",ref:i=>this.labelsSubContainer=i},!this.labelsOverflow&&n)))),(this.labelsOverflow||this.showMinMax)&&(0,a.h)("div",{class:"min-max-and-labels-container"},this.labelsOverflow&&(0,a.h)("div",{class:"labels-container"},(0,a.h)("div",{class:"labels-subcontainer"},n)),this.showMinMax&&(0,a.h)("div",{class:"min-max-values-container"},(0,a.h)("span",{class:"min-value"},this.minValue),(0,a.h)("span",{class:"max-value"},this.maxValueAux)))))}render(){const e=Array.from(this.element.querySelectorAll("gx-gauge-range"));return"circle"===this.type?this.renderCircle(e):"line"===this.type?this.renderLine(e):void console.warn("Error rendering component. Invalid type of gauge in ",this.element)}get element(){return(0,a.g)(this)}static get watchers(){return{type:["typeHandler"],showValue:["showValueHandler"],thickness:["labelsPositionHandler"]}}};b.style="gx-gauge{--center-circle-text-color:rgba(44, 44, 44, 1);--center-circle-background-color:rgba(255, 255, 255, 0);--indicator-circle-background-color:rgba(44, 44, 44, 1);--stroke-linecap:initial;--stroke-animation-duration:1s;--value-text-color:rgba(44, 44, 44, 1);--value-text-background-color:rgba(255, 255, 255, 0.5);--max-value-background-color:rgba(255, 255, 255, 0.5);--max-value-text-color:rgba(40, 40, 40, 0.8);--min-value-background-color:rgba(255, 255, 255, 0.5);--min-value-text-color:rgba(40, 40, 40, 0.8);--indicator-line-background-color:rgba(44, 44, 44, 1);--empty-range-background-color:rgba(192, 192, 192, 0.5);display:flex;position:relative;width:100%;transition-property:background-color, border-color, box-shadow, color, filter, opacity, transform;transition-duration:0.25s}@keyframes delay-animation-circle{0%{stroke-linecap:initial;stroke-dasharray:var(--stroke-dasharray-initial)}100%{stroke-linecap:initial;stroke-dasharray:var(--stroke-dasharray-initial)}}@keyframes loading-animation-circle{0%{stroke-dasharray:var(--stroke-dasharray-initial)}100%{stroke-dasharray:var(--stroke-dasharray)}}@keyframes delay-animation-line{0%{width:0}100%{width:0}}@keyframes loading-animation-line{0%{width:0}100%{width:var(--range-width)}}gx-gauge .line-gauge-container{display:flex;flex-wrap:wrap;width:100%;height:fit-content}gx-gauge .line-gauge-container .current-value-container{display:flex;flex-wrap:wrap;position:relative;width:100%;height:1.25em;transition:height 0.25s}gx-gauge .line-gauge-container .current-value-container .current-value{height:80%;line-height:1em;font-weight:700;z-index:1;transition:margin-left 0.25s, transform 0.25s, font-size 0.25s, background-color 0.25s, color 0.25s;background-color:var(--value-text-background-color);color:var(--value-text-color)}gx-gauge .line-gauge-container .current-value-container .current-value.center-align{margin-left:var(--percentage, 0);transform:translateX(-50%)}gx-gauge .line-gauge-container .current-value-container .current-value.right-align{margin-left:100%;transform:translateX(-100%)}gx-gauge .line-gauge-container .current-value-container+.ranges-labels-and-indicator-container .ranges-and-labels-container{margin-top:4px}gx-gauge .line-gauge-container .ranges-labels-and-indicator-container{display:flex;position:relative;width:100%;transition:width 0.25s, height 0.25s}gx-gauge .line-gauge-container .ranges-labels-and-indicator-container .indicator{display:block;position:absolute;height:100%;width:1.125%;z-index:1;transition:margin-left 0.25s, transform 0.25s, background-color 0.25s;background-color:var(--indicator-line-background-color)}gx-gauge .line-gauge-container .ranges-labels-and-indicator-container .indicator.center-align{margin-left:var(--percentage, 0);transform:translateX(-50%)}gx-gauge .line-gauge-container .ranges-labels-and-indicator-container .indicator.right-align{margin-left:100%;transform:translateX(-100%)}gx-gauge .line-gauge-container .ranges-labels-and-indicator-container .ranges-and-labels-container{position:relative;overflow:hidden;width:100%;background-color:var(--empty-range-background-color);transition:background-color 0.25s}gx-gauge .line-gauge-container .ranges-labels-and-indicator-container .ranges-and-labels-container .range{display:flex;justify-content:center;align-items:center;width:var(--range-width);height:100%;position:absolute;transition:width 0.25s;animation:delay-animation-line calc(var(--child-number) * var(--stroke-animation-duration)), loading-animation-line var(--stroke-animation-duration) ease-in-out calc(var(--child-number) * var(--stroke-animation-duration))}gx-gauge .line-gauge-container .ranges-labels-and-indicator-container .ranges-and-labels-container .labels-container{display:flex;align-items:center;position:relative;width:100%;height:100%;overflow:unset}gx-gauge .line-gauge-container .ranges-labels-and-indicator-container .ranges-and-labels-container .labels-container .labels-subcontainer{display:flex;align-items:center;width:100%;height:1.0625em}gx-gauge .line-gauge-container .ranges-labels-and-indicator-container .ranges-and-labels-container .labels-container .labels-subcontainer .range-label{display:flex;justify-content:center;align-items:center;position:absolute;line-height:1.125em;width:var(--range-width);max-height:100%;filter:brightness(0.5);text-align:center;overflow:hidden;animation:delay-animation-line calc(var(--child-number) * var(--stroke-animation-duration)), loading-animation-line var(--stroke-animation-duration) ease-in-out calc(var(--child-number) * var(--stroke-animation-duration));transition:height 0.25s, width 0.25s, font-size 0.25s}gx-gauge .line-gauge-container .min-max-and-labels-container{display:flex;align-items:flex-end;position:relative;width:100%;height:1.25em;transition:width 0.25s, height 0.25s, font-size 0.25s}gx-gauge .line-gauge-container .min-max-and-labels-container .min-max-values-container{display:flex;justify-content:space-between;width:100%;height:1em;font-weight:500;z-index:1;pointer-events:none}gx-gauge .line-gauge-container .min-max-and-labels-container .min-max-values-container .min-value,gx-gauge .line-gauge-container .min-max-and-labels-container .min-max-values-container .max-value{line-height:1em;pointer-events:all;transition:background-color 0.25s, color 0.25s}gx-gauge .line-gauge-container .min-max-and-labels-container .min-max-values-container .max-value{background-color:var(--max-value-background-color);color:var(--max-value-text-color)}gx-gauge .line-gauge-container .min-max-and-labels-container .min-max-values-container .min-value{background-color:var(--min-value-background-color);color:var(--min-value-text-color)}gx-gauge .line-gauge-container .min-max-and-labels-container .labels-container{display:flex;align-items:baseline;position:absolute;width:100%;height:1.125em;overflow:hidden}gx-gauge .line-gauge-container .min-max-and-labels-container .labels-container .labels-subcontainer{display:flex;align-items:center;width:100%;height:1.0625em}gx-gauge .line-gauge-container .min-max-and-labels-container .labels-container .labels-subcontainer .range-label{display:flex;justify-content:center;align-items:center;position:absolute;line-height:1.125em;width:var(--range-width);max-height:100%;filter:brightness(0.5);text-align:center;overflow:hidden;animation:delay-animation-line calc(var(--child-number) * var(--stroke-animation-duration)), loading-animation-line var(--stroke-animation-duration) ease-in-out calc(var(--child-number) * var(--stroke-animation-duration));transition:width 0.25s}gx-gauge .circle-gauge-container{display:flex;justify-content:center;align-items:center;align-self:stretch;position:relative}gx-gauge .circle-gauge-container .svg-and-indicator-container{display:flex;align-items:center;position:relative;width:100%;height:100%}gx-gauge .circle-gauge-container .svg-and-indicator-container svg{width:100%;height:100%;min-width:5px;min-height:5px}gx-gauge .circle-gauge-container .svg-and-indicator-container svg .circle-range{fill:none;stroke-linecap:var(--stroke-linecap, initial);transition:stroke 0.25s, stroke-dasharray 0.25s;animation:delay-animation-circle calc(var(--child-number) * var(--stroke-animation-duration)), loading-animation-circle var(--stroke-animation-duration) ease-in-out calc(var(--child-number) * var(--stroke-animation-duration))}gx-gauge .circle-gauge-container .svg-and-indicator-container svg .background-circle{fill:none;stroke:var(--empty-range-background-color);transition:stroke 0.25s}gx-gauge .circle-gauge-container .svg-and-indicator-container .indicator-container{position:absolute;width:100%;height:1.125%;transition:transform 0.25s}gx-gauge .circle-gauge-container .svg-and-indicator-container .indicator-container .indicator{height:100%;transition:background-color 0.25s;background-color:var(--indicator-circle-background-color)}gx-gauge .circle-gauge-container .current-value-container{position:absolute}gx-gauge .circle-gauge-container .current-value-container>span.current-value{display:block;line-height:100%;padding-bottom:0.125em;font-weight:900;transition:background-color 0.25s, color 0.25s;color:var(--center-circle-text-color);background-color:var(--center-circle-background-color)}"}}]);