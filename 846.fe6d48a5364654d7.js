"use strict";(self.webpackChunkgenexus_web_application=self.webpackChunkgenexus_web_application||[]).push([[846],{3846:(y,c,r)=>{r.r(c),r.d(c,{gx_canvas:()=>d,gx_canvas_cell:()=>C});var n=r(4570),x=r(6825),f=r(9788);const g=":scope > .canvas-cells-container > .auto-grow-cell",v=e=>`auto-grow-cell-${e}`;let d=class{constructor(e){(0,n.r)(this,e),this.gxClick=(0,n.c)(this,"gxClick",7),this.swipe=(0,n.c)(this,"swipe",7),this.swipeUp=(0,n.c)(this,"swipeUp",7),this.swipeRight=(0,n.c)(this,"swipeRight",7),this.swipeDown=(0,n.c)(this,"swipeDown",7),this.swipeLeft=(0,n.c)(this,"swipeLeft",7),this.disabled=!1,this.invisibleMode="collapse",this.layoutIsReady=!1,this.minHeight=null,this.canvasFixedHeight=null,this.autoGrowMechanismStarted=!1,this.canvasFixedMinHeight=0,this.didLoad=!1,this.highestCanvasCellId=null,this.handleClick=this.handleClick.bind(this)}setCanvasAutoGrowMechanism(){!this.didLoad||this.autoGrowMechanismStarted||(this.autoGrowMechanismStarted=!0,this.setCanvasMinHeight(),null==this.canvasFixedHeight&&this.setCanvasObserver(),this.setCanvasCellsObserver())}setCanvasMinHeight(){let e=0;const t=this.element.querySelectorAll(":scope > .canvas-cells-container > .without-auto-grow-cell"),i=this.innerCanvasContainer.clientHeight;t.forEach(s=>{let a=0;const{top:l,minHeight:h}=s;l.includes("calc")?a=Number(h.replace("px","").trim())+this.getValueOfCalcProperty(l,i):h.includes("calc")?a=Number(l.replace("px","").trim())+this.getValueOfCalcProperty(h,i):(l.includes("px")&&(a=Number(l.replace("px","").trim())),h.includes("px")&&(a+=Number(h.replace("px","").trim()))),e=Math.max(e,a)}),this.canvasFixedMinHeight=e,0!=this.element.clientHeight&&this.innerCanvasContainer.clientHeight<e&&this.fixCanvasHeight(e)}setCanvasObserver(){this.watchForCanvasObserver=new ResizeObserver(()=>{if(0==this.element.clientHeight)return;if(this.innerCanvasContainer.clientHeight<=this.canvasFixedMinHeight)return void this.fixCanvasHeight(this.canvasFixedMinHeight);const e=this.getMaxHeightConstraint();this.innerCanvasContainer.clientHeight+1.75<e&&this.fixCanvasHeight(e)}),this.watchForCanvasObserver.observe(this.innerCanvasContainer)}setCanvasCellsObserver(){this.watchForItemsObserver=new ResizeObserver(t=>{let i,s=0;t.forEach(a=>{const l=a.target.id,h=this.element.querySelector(`:scope > .canvas-cells-container > .${v(l)}`),u=this.getCanvasCellTotalHeight(h);s<u&&(s=u,i=l)}),this.adjustCanvasHeight(i,s)}),this.element.querySelectorAll(g).forEach((t,i)=>{t.id=i.toString(),t.classList.add(v(i.toString())),this.watchForItemsObserver.observe(t)})}fixCanvasHeight(e){let t=0;this.element.querySelectorAll(":scope > .canvas-cells-container > gx-canvas-cell").forEach(s=>{const a=this.fixCanvasCellProperties(s);t=Math.max(t,a)}),this.disconnectCanvasObserver(),this.canvasFixedHeight=e,this.canvasFixedMinHeight=t}getCanvasCellTotalHeight(e){return e.clientHeight+e.offsetTop}getValueOfCalcProperty(e,t){const a=Number(e.match(/-?\d+%/g)[0].replace("%",""));return Number(e.match(/-?\d+px/g)[0].replace("px",""))+t*(a/100)}fixCanvasCellProperties(e){const t=e.offsetTop;e.style.setProperty("top",`${t}px`);const i=e.minHeight;let s;const a=this.innerCanvasContainer.clientHeight;return s=i.includes("calc")?this.getValueOfCalcProperty(i,a):i.includes("%")?a*(Number(i.replace("%","").trim())/100):Number(i.replace("px","").trim()),e.style.setProperty("min-height",`${s}px`),null!=e.maxHeight?(e.style.setProperty("max-height",`${s}px`),t+s):0}adjustCanvasHeight(e,t){null!=this.canvasFixedHeight?this.canvasFixedHeight<=t?(this.canvasFixedHeight=t,this.highestCanvasCellId=e):this.highestCanvasCellId===e&&(this.canvasFixedHeight=this.getMaxHeightConstraint()):this.innerCanvasContainer.clientHeight+1.75<t&&this.fixCanvasHeight(t)}getMaxHeightConstraint(){const e=this.element.querySelectorAll(g);let t=0;return e.forEach((i,s)=>{const a=this.getCanvasCellTotalHeight(i);t<a&&(t=a,this.highestCanvasCellId=s.toString())}),t}handleClick(e){this.disabled||this.gxClick.emit(e)}disconnectCanvasObserver(){void 0!==this.watchForCanvasObserver&&(this.watchForCanvasObserver.disconnect(),this.watchForCanvasObserver=void 0)}componentDidLoad(){(0,x.m)(this),this.didLoad=!0,this.layoutIsReady&&this.setCanvasAutoGrowMechanism()}disconnectedCallback(){void 0!==this.watchForItemsObserver&&(this.watchForItemsObserver.disconnect(),this.watchForItemsObserver=void 0),this.disconnectCanvasObserver()}render(){const e=(0,f.g)(this.cssClass);return this.element.addEventListener("click",this.handleClick),(0,n.h)(n.H,{class:{[this.cssClass]:!!this.cssClass,[e.vars]:!0},style:{width:this.width,height:null==this.canvasFixedHeight?this.minHeight:null,"min-height":null==this.canvasFixedHeight?this.minHeight:null}},(0,n.h)("div",{class:"canvas-cells-container",style:{height:null!=this.canvasFixedHeight&&`${this.canvasFixedHeight}px`,"min-height":null!=this.canvasFixedHeight&&`${this.canvasFixedMinHeight}px`},ref:t=>this.innerCanvasContainer=t},(0,n.h)("slot",null)))}get element(){return(0,n.g)(this)}static get watchers(){return{layoutIsReady:["setCanvasAutoGrowMechanism"]}}};d.style="gx-canvas{display:block;position:relative;height:fit-content;transition-property:background-color, border-color, box-shadow, color, filter, opacity, transform;transition-duration:0.25s}gx-canvas[hidden]{display:none !important}gx-canvas[hidden][invisible-mode=keep-space]{display:block !important;visibility:hidden}gx-canvas>.canvas-cells-container{position:relative;height:100%;overflow:hidden}";let C=class{constructor(e){(0,n.r)(this,e),this.left="0px",this.maxHeight=null,this.minHeight="100%",this.top="0px",this.width="100%"}setupObserver(e){e&&"collapse"===e.invisibleMode&&(this.observer=new MutationObserver(()=>{this.changeVisibility(e)}),this.observer.observe(e,{attributes:!0,attributeFilter:["hidden"],childList:!1,subtree:!1}))}changeVisibility(e){this.element.style.display=e.hidden?"none":null}componentDidLoad(){this.setupObserver(this.element.firstElementChild)}disconnectedCallback(){void 0!==this.observer&&(this.observer.disconnect(),this.observer=void 0)}render(){return(0,n.h)(n.H,{class:{"auto-grow-cell":null==this.maxHeight,"without-auto-grow-cell":null!=this.maxHeight},style:{top:this.top,left:this.left,width:this.width,"min-height":this.minHeight,"max-height":this.maxHeight}},(0,n.h)("slot",null))}get element(){return(0,n.g)(this)}};C.style="gx-canvas-cell{display:flex;position:absolute;flex-direction:row;overflow:hidden}gx-canvas-cell[align=left]>gx-textblock{text-align:start}gx-canvas-cell[align=center]>gx-textblock{text-align:center}gx-canvas-cell[align=right]>gx-textblock{text-align:end}gx-canvas-cell[valign=top]>::part(valign){align-items:flex-start}gx-canvas-cell[valign=middle]>::part(valign){align-items:center}gx-canvas-cell[valign=bottom]>::part(valign){align-items:flex-end}gx-canvas-cell[hidden]{display:none !important}gx-canvas-cell[hidden][invisible-mode=keep-space]{display:flex !important;visibility:hidden}gx-canvas-cell[align=left]{justify-content:flex-start}gx-canvas-cell[align=center]{justify-content:center}gx-canvas-cell[align=right]{justify-content:flex-end}gx-canvas-cell[valign=middle]{align-items:center}gx-canvas-cell[valign=bottom]{align-items:flex-end}gx-canvas-cell[max-height]>gx-textblock::part(content),gx-canvas-cell[max-height]>gx-form-field>.form-field-group .gx-edit-content{position:absolute}"}}]);